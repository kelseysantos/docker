version: '3.9'
services:
  gitlab:
    # build: .
    container_name: container_gitlab
    image: gitlab/gitlab-ce:latest
    hostname: gitlab
    restart: unless-stopped
    environment:
      - PUID=1000
      - PGID=1000
      - TZ=America/Cuiaba
    volumes:
      - ./etc:/etc/gitlab
      - ./opt:/var/opt/gitlab
      - ./log:/var/log/gitlab
    ports:
      - 22:22
      - 80:80
      - 443:443
    network_mode: host

#NETWORK CONFIGURATION
# networks:
#   NET_LOCAL:
#     name: NET_LOCAL
#     driver: bridge
#   NET_212:
#     name: NET_212
#     driver: macvlan
#     driver_opts: 
#       parent: eno1
#     #   macvlan_mode: bridge
#     ipam:
#       config:
#         -
#           subnet: 10.100.212.0/24
#           gateway: 10.100.212.1
#           aux_addresses:
#             host: 10.100.212.65
#   NET_DOCKER:
#     name: NET_DOCKER
#     driver: ipvlan
#     driver_opts:
#       # parent: eth0.10
#       mode: l3
#     ipam:
#       config:
#         -
#           subnet: 10.1.10.0/24
#           gateway: 10.1.10.1

# volumes:
#   volmysqlghost:
#     name: volmysqlghost
#     driver: local
#   volghost:
#     name: volghost
#     driver: local

    # volumes:
    #   - type: bind
    #     source: /volume1/docker/influxdb2/data
    #     target: /var/lib/influxdb2
    #   - type: bind
    #     source: /volume1/docker/influxdb2/config
    #     target: /etc/influxdb2